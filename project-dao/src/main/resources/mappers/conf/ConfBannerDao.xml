<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.modules.conf.dao.ConfBannerDao">

    <!--分页查询轮播图列表-->
    <select id="queryPage" resultType="com.project.modules.conf.vo.list.ConfBannerListVo">
        SELECT
            conf_banner.banner_id,
            conf_banner.banner_name,
            conf_banner.status,
            conf_banner.sort
        FROM
            conf_banner AS conf_banner
        <where>
            <if test="bannerName != null and bannerName.trim() != ''">
                conf_banner.banner_name LIKE "%"#{bannerName}"%"
            </if>
            <if test="status != null and !&quot;&quot;.equals(status)">
                AND conf_banner.status = #{status}
            </if>
        </where>
        ORDER BY conf_banner.create_time DESC, conf_banner.update_time DESC
    </select>

    <!--根据轮播图ID获取轮播图详情-->
    <select id="getConfbannerInfoVo" resultType="com.project.modules.conf.vo.info.ConfBannerInfoVo">
        SELECT
            conf_banner.banner_id,
            conf_banner.banner_name,
            conf_banner.status,
            conf_banner.sort
        FROM
            conf_banner AS conf_banner
        WHERE
            conf_banner.banner_id = #{bannerId}
    </select>

    <!--查询状态为正常的轮播图集合-->
    <select id="normalList" resultType="com.project.modules.conf.vo.info.ConfBannerInfoVo">
        SELECT
            conf_banner.banner_id,
            conf_banner.banner_name,
            conf_banner.status,
            conf_banner.sort
        FROM
            conf_banner AS conf_banner
        WHERE
            conf_banner.status = #{status}
            ORDER BY conf_banner.sort DESC
    </select>

</mapper>